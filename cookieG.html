<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <meta charset="utf-8">
    <title></title>
    <style media "screen">
    body{background-image:url("kusa*.png");}

    img{width:280px;}
    .container{
      display: flex;
      height:100vh;}
    .item1{flex-grow:2;
    background-image: url("kusa.png")}
    </style>
    </head>

    <body>
      <script type="text/javascript">
      //インバーター格納先
      let event_ids = [];

      let ls_count=localStorage.getItem("ls_count");
      if(ls_count){
        cookie_count=parseInt(ls_count);
      }else {
        cookie_count=0;
      }

      setInterval(save_action,1000);

      su_event_id = setInterval(screen_update,100);
      function screen_update() {
        var count_text=document.getElementById('cookie_count')
        count_text.textContent=cookie_count;
      }
      function event_clear() {
        clearInterval(su_event_id);
      }

      function save_action() {
        localStorage.setItem("ls_count",cookie_count);
      }

      function cookieClick(num) {
        var cookie_img = document.getElementById('cookie_img');
        cookie_img.classList.remove('animate__animated','animate__shakeX');
        void cookie_img.offsetWidth;
        cookie_img.classList.add('animate__animated','animate__shakeX');
        cookie_count=cookie_count+num;
      }
      function cl() {
        if(cookie_count >=10){
          cookie_count -= 10;
        let r_id = setInterval(cookieClick,1000,1);
        event_ids.push(r_id);
      }
      }
      function cll() {
        if(cookie_count >=100){
          cookie_count -= 100;
            let r_id = setInterval(cookieClick,1000,10);
            event_ids.push(r_id);
        }
      }
      function clll() {
        if(cookie_count >=1000){
          cookie_count = 1000;
        let r_id = setInterval(cookieClick,1000,100);
      event_ids.push(r_id);
      }
    }
      function cllll() {
        if(cookie_count >=10000){
          cookie_count -= 10000;
        let r_id = setInterval(cookieClick,1000,1000);
          event_ids.push(r_id);
      }
    }
      function clllll() {
        if(cookie_count >=100000){
          cookie_count -= 100000;
        let r_id = setInterval(cookieClick,1000,10000);
        event_ids.push(r_id);
      }
    }
    function sell_c1(){
      if(event_ids.length>0){
        let r_id=event_ids.pop();
        clearInterval(r_id);
    }
  }
      </script>

      <div class="container">
      <div class="item1">
        <button id="screen_switch" onclick="event_clear()" type="button" name="button">更新切り替え</button>
        <p>
        <span id="cookie_count"></span>cookies
      </p>
          <img id="cookie_img" onclick="cookieClick(1)" src="cookie.png" alt="">
      </div>
          <div class="item2">
          </div>
          <P class="animate__animated animate__bounce">こんちわ</p>
          <div class="item3">
          </div>
          購入
          <ul>
            <li onclick="cl()">カーソル</li>
            <li onclick="cll()">グランマ</li>
            <li onclick="clll()">ファーム</li>
            <li onclick="cllll()">マイン</li>
            <li onclick="clllll()">ファクトリー</li>
          </ul>
          売却
      <ul>
        <li onclick="sell_c1()">カーソル</li>
        <li onclick="cll()">グランマ</li>
        <li onclick="clll()">ファーム</li>
        <li onclick="cllll()">マイン</li>
        <li onclick="clllll()">ファクトリー</li>
      </ul>
      </body>
</html>
